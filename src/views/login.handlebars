<h1>Iniciar sesión</h1>
{{#if error }}
    <p>{{error}}</p>
  {{/if}}
<form id="loginForm" action="/login" method="post">
    <label for="email">Correo electrónico</label>
    <input id="email" type="email" placeholder="Correo">
    <label for="password">Contraseña</label>
    <input id="password" type="password" placeholder="contraseña">
    <button type="submit">Iniciar sesión</button>
    <a href="/github/login" role="button">Iniciar sesión con github</a>
    <a href="/register">Registrarse</a>
</form>

<script>
    document.getElementById('loginForm').addEventListener('submit', function(event){
        event.preventDefault();
        fetch('http://localhost:8080/login', {
            method: "POST",
            body: JSON.stringify({
                email: event.target.email.value,
                password: event.target.password.value,
            }),
            headers: {
                "Content-Type": "application/json",
            }
        })
        .then((res)=>{
            window.location = 'http://localhost:8080/home';
        }).catch(err=>{
            alert(err);
        });
    })
</script>